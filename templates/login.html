{% extends "base.html" %}
{% block title %}Login page{% endblock %}
{% block content %}
    <h1 style="align-center" align="center">Please login</h1>
    {% if error %}
        <div class="alert alert-danger" role="alert">
            {{ error }}
        </div>
    {% endif %}
    <!-- <div class="sidebar" data-color="primary">
          Tip 1: You can change the color of the sidebar using: data-color="blue | green | orange | red | yellow"
      -->
            <!-- <div class="logo">
              <a href="" class="simple-text logo-mini">
                Rep.
              </a>
            </div>
            <div class="sidebar-wrapper">
              <ul class="nav">
                <li class="active ">
                  <a href="{{url_for('dashboard')}}">
                    <i class="now-ui-icons design_app"></i>
                    <p>Dashboard</p>
                  </a>
                </li>
                <li>
                  <a href="./icons.html">
                    <i class="now-ui-icons education_atom"></i>
                    <p>Simulation</p>
                  </a>
                </li>
                <li>
                  <a href="./notifications.html">
                    <i class="now-ui-icons ui-1_bell-53"></i>
                    <p>Deep Anaylsis</p>
                  </a>
                </li>
                <li>
                  <a href="{{ url_for('playerprofile') }}">
                    <i class="now-ui-icons users_single-02"></i>
                    <p>User Profile</p>
                  </a>
                </li>
                <li>
                  <a href="{{url_for('athletes')}}">
                    <i class="now-ui-icons design_bullet-list-67"></i>
                    <p>Shoe list</p>
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </div>  -->
    <form action="" method="post">
        <div class="form-group">
            <label for="username">Username</label>
            <input type="text" class="form-control" id="username"
            name="username" placeholder="Enter username" value="{{ username }}">
        </div>
        <div class="form-group">
            <label for="password">Password</label>
            <input type="password" class="form-control" id="password"
            name="password" placeholder="Enter password">
        </div>
        <button type="submit" class="btn btn-primary">Login</button>
    </form>
    <h1>Welcome to My Awesome App</h1>
<div id="firebaseui-auth-container"></div>
<div id="loader">Loading...</div>
      <!-- Insert these scripts at the bottom of the HTML, but before you use any Firebase services -->
    
      <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
      <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-app.js"></script>
    
      <!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
      <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-analytics.js"></script>
    
      <!-- Add Firebase products that you want to use -->
      <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-auth.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.2.4/firebase-firestore.js"></script>
      <script src="https://www.gstatic.com/firebasejs/ui/4.6.1/firebase-ui-auth.js"></script>
       <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.6.1/firebase-ui-auth.css" /> 
      <script>
        // TODO: Replace the following with your app's Firebase project configuration
        // For Firebase JavaScript SDK v7.20.0 and later, `measurementId` is an optional field
        var firebaseConfig = {
          apiKey: "AIzaSyCtHfLNTh_mQt5YRTAol5QouEuoFWFrQyI",
          authDomain: "hxapp-38bf8.firebaseapp.com",
          databaseURL: "https://hxapp-38bf8.firebaseio.com",
          projectId: "hxapp-38bf8",
          storageBucket: "hxapp-38bf8.appspot.com",
          messagingSenderId: "435889074381",
          appId: "1:435889074381:web:924283ad413202a241f984",
          measurementId: "G-JWNC4M16WK"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
      </script>
      <script> 
        var ui = new firebaseui.auth.AuthUI(firebase.auth());
        var uiConfig = {
      callbacks: {
        signInSuccessWithAuthResult: function(authResult, redirectUrl) {
          // User successfully signed in.
          // Return type determines whether we continue the redirect automatically
          // or whether we leave that to developer to handle.
          var movies = {
          'title': "kehlin",
          'release_date': "is the best"
          }

          // $.ajax({
          // url: "{{url_for('login') }}",
          // type: 'POST',
          // data: JSON.stringify(movies),   // converts js value to JSON string
          // }).done(function(result){
          //   console.log(result)
          //   console.log('hello')
          // })
          
          console.log(authResult)
          //redirectUrl = "{{url_for('dashboard') }}"
          console.log(redirectUrl)
          console.log("successfull signed in")
          return false;
        },
        uiShown: function() {
          // The widget is rendered.
          // Hide the loader.
          document.getElementById('loader').style.display = 'none';
        }
      },
      // Will use popup for IDP Providers sign-in flow instead of the default, redirect.
      signInFlow: 'popup',
      signInSuccessUrl: "",//"{{url_for('dashboard')}}",
      signInOptions: [
        // Leave the lines as is for the providers you want to offer your users.
        //firebase.auth.GoogleAuthProvider.PROVIDER_ID,
        firebase.auth.EmailAuthProvider.PROVIDER_ID,
      ],
      // Terms of service url.
      tosUrl: '<your-tos-url>',
      // Privacy policy url.
      privacyPolicyUrl: '<your-privacy-policy-url>'
      };

        ui.start('#firebaseui-auth-container', uiConfig);
        console.log(ui)
        
      </script>
{% endblock %}
 